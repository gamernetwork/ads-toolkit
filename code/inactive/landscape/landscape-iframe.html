<!-- Landscape Ad Served in iframe -->
<link rel="stylesheet" type="text/css" href="http://images.eurogamer.net/2013/dan.bouckley/eg-landscape-ad/styles/landscape-ad.css?48" />

<style type="text/css">
.leaderboard.landscape { margin-top: 16px; margin-bottom: 16px; }
@media screen and (max-width: 540px) { .leaderboard.landscape { margin-top: 0; margin-bottom: 0; } body { background-image: none; } }

.advert-container { position: relative; z-index: 10; }
article > header { box-shadow: 0px 1px 0px rgba(255,255,255,0.2); }

</style>

<style type="text/css">

	/* ---------- Campaign */

	.low-leaderboard {
		width: 100%;
		height: auto;
	}

	#landscape-ad {
		}
	#advert-video {
		background-image: url('http://images.eurogamer.net/2014/pl/acunity/ac_video_low.jpg');
		box-shadow: inset 0px 0px 0px 1px rgba(0,0,0,0.8), inset 0px 0px 20px rgba(0,0,0,0.8);
		}
	
	#advert-cta-key-art {
		background-image: url('http://images.eurogamer.net/2014/pl/acunity/ac_300x250_v2.jpg');
		}
				
	#advert-cta-button {
		width: 300px;
		background-image: url('http://images.eurogamer.net/2014/pl/acunity/pusty_click.png');
		}
		
	#advert-video-play-btn {
		/*background: url('http://images.eurogamer.net/2014/pl/acunity/ac_video_low.jpg');*/
		}

	#advert-cta-button {
		right: auto;
		left: 0;
	}
			
	@media screen and (min-width: 769px) {
	
		#advert-video-play-btn {
			margin-top: -85px;
			}
	
	}
		
	@media screen and (max-width: 768px) {
	
		#advert-video {
			background-position: top center;
			}
		
		#advert-cta-button {
			height: 200px;
			background-size: 66%;
			}
			
			
	}
	
	@media screen and (max-width: 540px) {
	
		#advert-cta-button {
			background-repeat: no-repeat;
			height: 75px;
			background-position: right 3px;
			background-size: auto;
			}
			
	}

	#landscape-ad {
		width: 960px;
	}
	#advert-cta-container {
		width: 300px;
	}
	#advert-screens-container {
		margin-left: 328px;
	}
	#advert-video-container {
		margin-left: 580px;
	}
	#advert-video {
		position: relative;
	}
	#advert-video-play-btn {
	width: 100%;
	height: 100%;
	position: relative;
	top: auto;
	left: auto;
	margin: 0;
	}

	#advert-screens-container {
		display: block;
		}

		#advert-screens-container {
width: 264px; 
}

</style>

<!-- Temp -->
<style type="text/css">#landscape-ad-media { position: absolute; right: 0; }</style>

<!-- Landscape Ad HTML -->
<div id="landscape-ad">
	<div id="landscape-ad-blocks">
		<div id="advert-cta-container">
			<div id="advert-cta-key-art"></div>
			<div id="advert-cta-button">
				<a target="_blank" href="%%DEST_URL%%"></a>
			</div>
		</div>
		<div id="advert-screens-container">
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/01.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb01.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/02.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb02.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/03.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb03.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/04.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb04.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/05.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb05.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/06.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb06.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/07.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb07.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/08.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb08.jpg" />
			</div>
			<div class="advert-screen" rel="http://images.eurogamer.net/2014/pl/acunity/screens/09.jpg">
				<img src="http://images.eurogamer.net/2014/pl/acunity/screens/tumb09.jpg" />
			</div>
		</div>
		<div id="advert-video-container">
			<div id="advert-video" rel="http://images.eurogamer.net/2014/pl/acunity/ac_movie.mp4">
				<div id="advert-video-play-btn"></div> 
			</div>
		</div>
	</div>
	<div id="landscape-ad-media">
		<div id="advert-media-close"></div>
		<div id="advert-media">
			<img id="advert-media-splash" src="http://images.eurogamer.net/2013/eso/landscape/Placeholder.jpg" />
			<div id="advert-media-video"></div>
		</div>
	</div>
	<img id="landscape-ad-tracking" src="http://images.eurogamer.net/2011/eg-creative/tools/onebyone.gif">
</div>

<IMG SRC="http://ad.doubleclick.net/ddm/trackimp/N4022.1818880.EUROGAMER.PL/B8157282.112196414;dc_trk_aid=285222706;dc_trk_cid=59803693;ord=%%CACHEBUSTER%%?" BORDER="0" HEIGHT="1" WIDTH="1" ALT="" />


<!-- // END USG DEMO -->
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<script>

    var jQuery = jQuery.noConflict();

    parent.jQuery('.low-leaderboard').css({
		'width': '100%',
		'height': 'auto'
	});

	frameElement.style.height = '270px';
	frameElement.style.width = '100%';


</script>

<script type="text/javascript">var landscapeName = 'ACUNITY';</script>
<script type="text/javascript"> var campaignID = 'ACUNITY'; </script>
<script type="text/javascript">
	
/*
US Gamer
Landscape Ad JS
*/

(function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
        (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o),
    m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-23103987-1', 'auto', {
    'name': 'showcase'
});

/* ---------- Exposed */

var mediaPanel;

/* ---------- Scoped */

(function() {

    /* ---------- 'Global' */

    // Get Script - For JWPlayer
    function getScript(url, success) {

        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = url;

        var head = document.getElementsByTagName('script')[0],
            done = false;

        head.parentNode.insertBefore(script, head);

        script.onload = script.onreadystatechange = function() {

            if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {

                // Callback
                success();
                script.onload = script.onreadystatechange = null;
                done = true;

            };

        };

    };

    /* ---------- DOM Ready */

    jQuery(document).ready(function() {

        /* ---------- Options */

        // Base jQuery Settings
        var j = jQuery;
        j.fx.interval = 25;

        // Landscape Ad Options
        var options = {
            blocks: {
                container: j('#landscape-ad-blocks')
            },
            media: {
                container: j('#landscape-ad-media'),
                state: 'closed',
                splash: j('#advert-media-splash').attr('src'),
                video: j('#advert-video').attr('rel')
            }
        }

        /* ---------- Functions */

        mediaPanel = {
            state: function(onComplete) {

                // Check For Function As Callback
                if (typeof onComplete === 'function') {

                    // Open Panel
                    if (options.media.state == 'closed') {

                        // Run Callback On Animation Complete
                        this.open(onComplete);

                        // Change Panel
                    } else if (options.media.state == 'open') {

                        // Reset Video
                        if (j('#advert-media-video_wrapper').length == 1) {
                            videoDestroy();
                        }

                        // Run Callback Now
                        onComplete();

                    }

                }

            },
            open: function(onComplete) {

                // Get Content Height
                var height = j('#advert-media-splash').height();

                frameElement.style.height = height + 270 + 16 + 'px';

                // Open Animation
                options.media.container.animate({
                    'height': height + 16 + 'px'
                }, 1200, function() {
                    j(this).addClass('active').css({
                        'height': 'auto'
                    });

                    options.media.state = 'open';
                    onComplete();
                });

                mediaPanel.tracking.google('open');

            },
            close: function() {

                // Get Content Height
                if (j('#advert-media-splash').css('display') == 'none') {
                    var height = j('#advert-media-video_wrapper').find('*:first').height();
                } else {
                    var height = j('#advert-media-splash').height();
                }

                // Non Mobile Breakpoint Includes Padding
                if (window.innerWidth > 540) {
                    height = height + 16;
                }

                // Reset Panel
                j('#advert-media-splash').attr('src', options.media.splash);

                // Reset Video
                if (j('#advert-media-video_wrapper').length == 1) {
                    videoDestroy();
                }

                // Close States
                options.media.container.removeClass('active');
                options.media.container.css({
                    'height': height + 'px'
                });

                // Close Animation
                options.media.container.animate({
                    'height': '0px'
                }, 1200, function() {
                    options.media.state = 'closed';
                    frameElement.style.height = '270px';
                });

                mediaPanel.tracking.google('closed');

            },
            tracking: {
                google: function(section) {

                    // TODO: Implement
                    // URL
                    var url = '/landscape/' + landscapeName + '#' + section;
                    // Push
                    ga('showcase.send', 'pageview', url);

                },
                thirdParty: function(pixel) {

                    // TODO: Document

                    /* 
					- Example
					track3P({
						beg: 'http://www.google.com/',
						end: '?=TEST'
					});
					*/

                    // Options
                    var options = {};
                    options.beg = pixel.beg || '';
                    options.end = pixel.end || '';

                    // Only Track If Pixel Is Set
                    if ((options.beg > 7) || (options.end > 7)) {

                        j('#landscape-ad-tracking').attr('src', options.beg + Math.floor(Math.random() * 1000) + options.end);

                    }

                }
            }
        }

            function videoCreate() {

                j('#advert-media-splash').hide();

                jwplayer('advert-media-video').setup({
                    'modes': [{
                        type: 'flash',
                        controls: 'none',
                        src: 'http://images.eurogamer.net/2011/eg-creative/scripts/jwplayer/player-5.10.swf'
                    }, {
                        type: 'html5',
                        controls: 'none'
                    }],
                    autostart: true,
                    file: options.media.video,
                    height: '100%',
                    width: '100%',
                    dock: false
                });

                ga('showcase.send', 'event', 'ESO', 'Landscape Video Open', campaignID);

                jwplayer('advert-media-video').onComplete(function(evt) {
                    ga('showcase.send', 'event', 'ESO', 'Landscape Video Complete', campaignID);
                });

            };

        function videoDestroy() {

            jwplayer('advert-media-video').stop();
            // jwplayer('advert-media-video_wrapper').remove();
            j('#advert-media-video_wrapper').remove();
            j('<div id="advert-media-video"></div>').insertAfter('#advert-media-splash');
            j('#advert-media-splash').show();
            ga('showcase.send', 'event', 'ESO', 'Landscape Video Close', campaignID);

        };

        /* ---------- Event Handlers */

        // Video

        j('#advert-video-play-btn').css({
            'opacity': '0.8'
        });

        j('#advert-video-play-btn').click(function() {

            mediaPanel.tracking.google('video');

            mediaPanel.state(function() {

                // On Complete
                if (typeof jwplayer === 'undefined') {
                    getScript('http://images.eurogamer.net/2011/eg-creative/scripts/jwplayer/jwplayer-5.10.js', videoCreate);
                } else {
                    videoCreate();
                }

            });
        });

        j('#advert-video-play-btn').mouseenter(function() {

            j(this).animate({
                'opacity': '1'
            }, 100);

        });

        j('#advert-video-play-btn').mouseleave(function() {

            j(this).animate({
                'opacity': '0.8'
            }, 100);

        });

        // Screenshots
        j('#advert-screens-container').find('div.advert-screen').click(function() {

            var selected = j('#advert-screens-container').find('div.advert-screen').index(this);
            var node = j('#advert-screens-container').find('div.advert-screen').eq(selected);

            mediaPanel.tracking.google('screens-' + selected);
            ga('showcase.send', 'event', 'ESO', 'Landscape Open Gallery #' + selected, campaignID);

            mediaPanel.state(function() {

                // On Complete					
                j('#advert-media-splash').attr('src', node.attr('rel'));

            });

        });

        // Close Button
        j('#advert-media-close').click(function() {
            mediaPanel.close();
        });

    });

})();

</script>
